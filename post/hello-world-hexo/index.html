<!DOCTYPE html>
<html><head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <meta name="generator" content="Hugo 0.110.0-DEV">

  
  
  <link rel="stylesheet" href="/scss/index.min.95ba81376e079da48068412714d3b5b407c6cec0c5edbf6ebc255278b7938d7c.css">

</head>
<body>
  <div id="app"><header class="py-5 text-4 flex justify-center shadow print:hidden color-primary">
  <nav class="mx-20 w-full max-w-240 flex flex-wrap justify-center items-center whitespace-nowrap sm:flex-nowrap sm:justify-between">
    <div class="flex basis-full items-stretch justify-center sm:basis-auto">
      <img class="w-12 h-12 self-center" src="https://rogery.dev/img/logo.png">
      <a class="pl-5 font-bold flex self-center text-5" href="/"> Roger Young </a>
    </div>
    <ul class="pl-0 flex mt-5 self-center sm:mt-0">
      <button class="m-3 self-center" id="theme-switcher">
        <i class="i-carbon-automatic text-4">Sun</i>
      </button>
      <li class="flex"><a class="m-3" href="/post">Posts</a></li>
      <li class="flex"><a class="m-3" href="/tag">Tag</a></li>
      <li class="flex"><a class="m-3" href="/about">About</a></li>
    </ul>
  </nav>
</header>


<main class="px-5 flex justify-center">
  <article class="article w-full max-w-210 my-10">
    <header class="my-20">
      <h1 class="text-8 text-center folt-bold"> Hexo 搭建记录 </h1>
      <a
        class="text-center-my-6 hidden print:block"
        href="https://rogery.dev/">
        rogeryoungh
      </a>
      <div class="text-center"> 2021 年 2 月 2 日 </div>
    </header>
    
      <h1> 目录 </h1><nav id="TableOfContents">
  <ol>
    <li><a href="#hexo-本地搭建">Hexo 本地搭建</a></li>
    <li><a href="#主题配置">主题配置</a></li>
    <li><a href="#github-action-部署">GitHub Action 部署</a></li>
    <li><a href="#gitalk-评论">Gitalk 评论</a></li>
    <li><a href="#mathjax-test">MathJax Test</a></li>
    <li><a href="#code-highlight-test">Code Highlight Test</a></li>
  </ol>
</nav>
    <section class="content-frame my-10">
      <p><strong>已转 Hugo。</strong></p>
<p>折腾了一整天，终于把 Hexo 给搭到 GitHub Page 上，我还是太菜了。</p>
<p>又折腾了一天，使用了新的方式重新部署了博客，那也重写一下 Hello World 吧。</p>
<h2 id="hexo-本地搭建">Hexo 本地搭建</h2>
<p>装 git 和 npm、换淘宝源。装好之后安装 <code>hexo-cli</code>。</p>
<pre><code class="language-bash">$ npm install -g hexo-cli
</code></pre>
<p>用 <code>hexo</code> 新建目录 <code>blog</code>，进入目录。初始化环境</p>
<pre><code class="language-bash">$ hexo init blog
$ cd blog
$ npm install
</code></pre>
<p>这时，<code>source/_posts/</code> 下可以看到 <code>hello-world.md</code> 文档，可以修改试试。</p>
<p>查看一下成果。</p>
<pre><code class="language-bash">$ hexo serve
</code></pre>
<h2 id="主题配置">主题配置</h2>
<p>最终选定了 <a href="https://github.com/XPoet/hexo-theme-keep">Keep</a>，简洁大方，深得我心。</p>
<p>Keep 的作者给了一个 <a href="https://xpoet.cn">Demo</a>，就是他自己的博客。还有两篇文档，<a href="https://xpoet.cn/2020/04/Keep-%E4%B8%BB%E9%A2%98%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/">Keep 主题使用指南</a> 和 <a href="https://keep.xpoet.cn/2020/11/Keep-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/">Keep 主题配置指南</a> 。这两个文档讲的非常详细，跟着做很容易就配好了。</p>
<p>然后可以根据文档加入想要的插件，比如我加了 search 和 mathjax 等。</p>
<p>我决定通过 submodule 的方式使用主题，这样魔改样式时不会污染文章的时间线。</p>
<p>先 Fork 主题，然后在 blog 项目中引用。</p>
<pre><code class="language-bash">$ git submodule add https://github.com/RogerYoungh/hexo-theme-keep themes/keep
</code></pre>
<p>修改 blog 项目的配置，查看一下主题是否变了。接下来就开始喜闻乐见的魔改主题……此处省略八百字</p>
<p>主题是独立的项目，更新需要到 <code>themes/keep</code> 目录进行提交。但此时该仓库是游离态，提交修改需要先设置。</p>
<pre><code class="language-bash">$ git checkout master
</code></pre>
<p>之后 add、push 即可提交子模块。</p>
<blockquote>
<p>有时可能直接在主题仓库中修改提交，而主仓库并不会随之更新依赖版本。此时需要更新子模块</p>
<pre><code class="language-bash">$ git submodule update --remote --merge
</code></pre>
</blockquote>
<p>总之，博客仓库中成功拉取主题子模块，之后更新。</p>
<pre><code class="language-bash">$ git add .
$ git submodule
</code></pre>
<p>应该可以看到子模块的 SHA 更新了。</p>
<h2 id="github-action-部署">GitHub Action 部署</h2>
<p>分别维护代码和网页分支较为麻烦，于是我采用 GitHub Action 做自动部署。</p>
<p>首先在 <code>_config.yml</code>里设置部署位置</p>
<pre><code class="language-yml">deploy:
  type: git
  repo: https://github.com/用户名/用户名.github.io.git
  branch: gh-page
</code></pre>
<p>在 Google 直接搜 Hexo GitHub Action，第一个应该就是，按照说明填写信息并配置，push 上去应该就成功了。</p>
<blockquote>
<p>push 当然会报错，根据提示设好上游地址，这里我就偷懒不写啦（</p>
</blockquote>
<p>现在我们可以在 <code>用户名.github.io</code> 里看到我们的文章啦！</p>
<p>clone 下来的时候，不要再 <code>hexo init</code> 了，直接 <code>hexo serve</code>，根据提示缺啥包就用 <code>npm install</code> 把包装上。</p>
<h2 id="gitalk-评论">Gitalk 评论</h2>
<p>Keep 的文档讲的已经很清楚了，先请求 <a href="https://github.com/settings/applications/new">OAuth</a>，填写博客地址。我直接把博客地址当 issues 仓库，配置文件里就填博客所在的 Repository 地址。</p>
<p>部署上去后，博主登录会自动创建 issues。编辑删除等需要到仓库的 issus 地址去操作。</p>
<p>想了想，还是把评论关了，看着那 issues 闹心，<del>主要也没啥人评论</del>。如果想与我联系的，博客和 GitHub 我都留了邮箱。</p>
<p>等真有人找我说话了，我再把评论打开吧，不然那么多 issues 都只有我一个人，看着怪可怜的。</p>
<h2 id="mathjax-test">MathJax Test</h2>
<p> $\mathrm\LaTeX$ ，勾股定理  $a^2+b^2=c^2$ ，</p>
<p> $$
\sum_{n=1}^\infty \frac{1}{n^2} = \frac{\pi^2}{6}
$$ </p>
<h2 id="code-highlight-test">Code Highlight Test</h2>
<pre><code class="language-java">public class Main {
    public static void main(String args[]) {
        System.out.println(&quot;Hello World!&quot;);
    }
}
</code></pre>

    </section>
    <hr />
    <section class="comment-frame my-10">
      


  <div class="giscus"></div>
<script>
let giscusTheme = localStorage.getItem("giscus-theme");
let giscusAttributes = () => {
  return {
    "src": "https://giscus.app/client.js",
    "data-repo": "rogeryoungh\/blog",
    "data-repo-id": "MDEwOlJlcG9zaXRvcnkzODQyNDIyNTQ=",
    "data-category": "Giscus",
    "data-category-id": "DIC_kwDOFucSTs4CTTLS",
    "data-mapping": "pathname",
    "data-strict": "0",
    "data-reactions-enabled": "1",
    "data-emit-metadata": "0",
    "data-input-position": "bottom",
    "data-theme": isCurrentDark() ? 'dark' : 'light',
    "data-lang": "zh-CN",
    "crossorigin": "anonymous",
    "async": "",
  }
};

document.addEventListener("DOMContentLoaded", function () {
  let giscusScript = document.createElement("script");
  Object.entries(giscusAttributes()).forEach(([key, value]) => giscusScript.setAttribute(key, value));
  document.body.appendChild(giscusScript);
});


function changeGiscusTheme(theme) {
  const sendMessage = (message) => {
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }
  sendMessage({
    setConfig: {
      theme: theme
    }
  });
}
</script>



    </section>
  </article>
</main>


<footer class="my-10 color-secondary text-3 flex items-end justify-center a-underline">
  <span>
    © 2021 <a href="https://acm.rogery.dev">Roger Young</a>
  </span>
  <i class="i-carbon-lighting inline-block px-1"></i>
  <span>Powered by <a href="https://gohugo.io/">Hugo</a> &
    <a href="https://github.com/rogeryoungh/hugo-pure">pure</a>
  </span>
</footer>
</div>
  <div>
    
  <link
  crossorigin="anonymous"
  integrity="sha512-mQwom8Ns4op+H29oDkD/LXO/OsXPvCFfkgZkFAVrhhePzRLU8NUI3Nkm43NhWUSmj3p5Cca2HTEkMQmXQRwDQQ=="
  href="https://lib.baomitu.com/KaTeX/0.16.4/katex.min.css" rel="stylesheet">
<script
  crossorigin="anonymous"
  integrity="sha512-sHSNLECRJSK+BFs7E8DiFc6pf6n90bLI85Emiw1jhreduZhK3VXgq9l4kAt9eTIHYAcuQBKHL01QKs4/3Xgl8g=="
  src="https://lib.baomitu.com/KaTeX/0.16.4/katex.min.js"></script>
<script
  crossorigin="anonymous"
  integrity="sha512-iWiuBS5nt6r60fCz26Nd0Zqe0nbk1ZTIQbl3Kv7kYsX+yKMUFHzjaH2+AnM6vp2Xs+gNmaBAVWJjSmuPw76Efg=="
  src="https://lib.baomitu.com/KaTeX/0.16.4/contrib/auto-render.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  renderMathInElement(document.body, {
    delimiters: [
      { left: '$$', right: '$$', display: true },
      { left: '$', right: '$', display: false },
      { left: '\\(', right: '\\)', display: false },
      { left: '\\[', right: '\\]', display: true },
    ],
    globalGroup: true,
    throwOnError: false
  });
});
</script>




  <script
  crossorigin="anonymous"
  src="https://lib.baomitu.com/prism/1.29.0/prism.min.js"></script>
<script
  crossorigin="anonymous"
  src="https://lib.baomitu.com/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>



<script>
let themeSwitch = document.getElementById("theme-switcher");
var icon = themeSwitch.children[0];
let currentPref = localStorage.getItem('pref-theme') || 'auto';
let html = document.documentElement;
let windowPref = window.matchMedia('(prefers-color-scheme: dark)');
function isCurrentDark() {
  let isDark = false;
  if (currentPref === 'light') {
    isDark = false;
  } else if (currentPref === 'dark') {
    isDark = true;
  } else {
    isDark = windowPref.matches;
  }
  return isDark;
}
let reloadTheme = () => {
  icon.classList.remove('i-carbon-moon');
  icon.classList.remove('i-carbon-sun');
  icon.classList.remove('i-carbon-automatic');
  if (currentPref === 'light') {
    icon.classList.add('i-carbon-sun');
  } else if (currentPref === 'dark') {
    icon.classList.add('i-carbon-moon');
  } else {
    icon.classList.add('i-carbon-automatic');
  }
  if (isCurrentDark()) {
    html.classList.add('dark');
  } else {
    html.classList.remove('dark');
  }
  
    changeGiscusTheme(isCurrentDark() ? 'dark' : 'light');
  
};
themeSwitch.addEventListener("click", () => {
  icon.classList.remove('i-carbon-moon');
  icon.classList.remove('i-carbon-sun');
  icon.classList.remove('i-carbon-automatic');
  if (currentPref === 'auto') {
    currentPref = 'dark';
    icon.classList.add('i-carbon-moon');
  } else if (currentPref === 'dark') {
    currentPref = 'light';
    icon.classList.add('i-carbon-sun');
  } else {
    currentPref = 'auto';
    icon.classList.add('i-carbon-automatic');
  }
  localStorage.setItem("pref-theme", currentPref);
  reloadTheme();
});
reloadTheme();
</script>


  </div>
</body>

</html>
